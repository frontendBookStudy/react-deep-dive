# 웹 페이지의 성능을 측정하는 다양한 방법

### 애플리케이션에서 확인하기

CRA를 통해서 프로젝트 구성 시 `reportWebVitals` 함수를 통해 성능 축정이 가능하다.
누적 레이아웃 이동(CLS), 최초 입력 지연(FID) 최초 콘텐츠풀 페인트(FCP), 최대 콘텐츠 페인팅(LCP), 첫 바이트까지의 시간 (TTFB) 를 측정할 수 있다.

CNA에서도 비슷한 메서드 `NextWebVitalsMetric`이 존재한다.
지표 중 Next.js-hydration 지표가 있는데, 리액트의 하이드레이션에 걸린 시간을 알려준다.

`web-vitals`라는 라이브러리가 있다.
이는 브라우저의 웹 페이지 성능을 측정할 수 있도록 `PerformanceObserver` 라는 API를 지원하기 때문에 `web-vitals`는 이를 이용해 성능을 측정한다.

반대로, 이 API를 지원하지 않는다면 성능 측정이 어렵다.

### 구글 라이트 하우스

구글에서 제공하는 웹 페이지 성능 측정 도구로, 오픈소스로 운여되고 있다.
핵심 웹 지표뿐만 아니라, 접근성 PWA, SEO 등 웹 페이지를 둘러싼 다양한 요소들을 측정하고 점검할 수 있다.

크롬 개발자 도구로 바로 라이트하우스를 사용할 수 있으며, 다른 브라우저의 경우 확장 프로그램을 통해 설치가 가능하다.

CLI에서는 `lighthouse` npm 라이브러리를 통해 CLI로 지표를 수집할 수 있다.

### WebPageTest

WebPageTest 서비스 중 하나인 것으로 보이며, 무료 기능도 있지만 유료 결제 기능도 따로 있다.

- Site Performance : 웹 사이트 성능 분석을 위한 도구
- Core Web Vitals : 웹사이트의 핵심 웹 지표를 확인하기 위한 도구
- Lighthouse : 구글 라이트하우스 도구
- Visual Comparison : 2개 이상의 사이트를 동시에 실행해 시간의 흐름에 따른 로딩 과정을 비교하는 도구
- Traceroute : 네트워크 경로를 확인하는 도구

### 크롬 개발자 도구

성능 통계라는 기능이 크롬 102 버전부터 출시되었으며, 웹 사이트의 성능을 자세하게 확인할 수 있는 도구이다.

라이트 하우스와 유사하게 Page Load를 선택해 웹 사이트 로딩 시작부터 끝까지 확인하거나 혹은 Start Recording을 눌러서 원하는 액션을 수행하면서 웹 사이트 성능을 측정할 수 있다.

Throttling 이라는 기능은 고의로 네트워크와 CPU 속도를 지연시키는 기능이다.

속도를 고의로 지연시켜 개발자 디바이스의 성능이 아닌 일반적인 모바일 사용자의 상대적으로 열악한 환경을 재현할 수 있다는 것이 장점이다.
만약, 현실적인 지표를 원한다면 적절하게 이 수치를 조정해주는 것이 좋다.
